{%extends 'base.html' %} {% load static %}
<link rel="stylesheet" type="text/CSS" href="{%static 'tracker/style.css' %}" />
<br />

{% block nav %}
<div>
  {% if user.is_authenticated %}
  <a href="{% url 'logout' %}">Logout</a>
  <a href="{% url 'password_change' %}">Change Password</a>
  <a href="{% url 'viewspends' %}">Spendings</a>
  {% else %}
  <a href="{%url 'login' %}">Login</a>
  <a href="{% url 'register'%}">Sign up</a>

  {%endif%}
</div>
{% endblock %}
<br />
{% block content %}
<br />
<div>
  <br />
  {% if user.is_authenticated %}
  <h3>Hello there! Welcome {{user.username}}...</h3>

  <form method="POST">
    {%csrf_token%}
    <input type="text" id="year" name="year" placeholder="YYYY" />
    <button type="submit" name="view" value="year">View Year</button>
  </form>

  <form method="POST">
    {%csrf_token%}
    <input type="month" id="month" name="month" />
    <button type="submit" name="view" value="month">View Month</button>
  </form>
  <br />

  <br />
  <h5>{{message}}</h5>
  <p>
    The total Amount Spent: {{total}}
    <br />
    Number of days Spent: {{count}}
  </p>
  <div class="table-responsive container">
    <table class="table-striped">
      <tr>
        {% for head in header %}
        <th>{{head}}</th>
        {% endfor %}
      </tr>

      <br />
      {% for data in table %}
      <tr>
        {% for rowdata in data %}
        <td>{{rowdata}}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>
  </div>
  <br />

  <br />
  <br />
  <h5>Category Based:</h5>
  <div class="table-responsive container">
    {% for category,table in categorised.items %}

    <table class="table-striped">
      <caption>
        {{category}}
      </caption>
      <tr>
        {% for head in header %}
        <th>{{head}}</th>
        {% endfor %}
      </tr>

      <br />
      {% for data in table %}
      <tr>
        {% for rowdata in data %}
        <td>{{rowdata}}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>

    {% endfor %}
  </div>
  <div class="table-responsive container">
    <table class="table-striped">
      {% for data,value in eachsum.items %}
      <tr>
        <td>{{data}}</td>
        <td>{{value}}</td>
      </tr>
      {% endfor %}
    </table>
  </div>
  <div></div>
  <img src="{% static 'images/pie.png' %}" />

  {% else %}
  <h3>Hello there! Welcome, Guest...</h3>
  {%endif%}
</div>

<br />
{% endblock %}
